import { BrowsePage } from './tabs/BrowsePage';
import { RecordPage } from './tabs/RecordPage';
import { ToolsPage } from './tabs/ToolsPage';
import { ProfilePage } from './tabs/ProfilePage';

@Entry
@Component
struct MainTabsPage {
  @State currentTabIndex: number = 0;
  private tabsController: TabsController = new TabsController();

  build() {
    Column() {
      // ä¸»å†…å®¹åŒºåŸŸ
      Tabs({ barPosition: BarPosition.End, controller: this.tabsController }) {
        // æµè§ˆTab
        TabContent() {
          BrowsePage()
        }
        .tabBar(this.buildTabBarItem(0, 'æµè§ˆ', 'ðŸ”', 'ðŸ”'))

        // è®°å½•Tab
        TabContent() {
          RecordPage()
        }
        .tabBar(this.buildTabBarItem(1, 'è®°å½•', 'ðŸ“', 'ðŸ“'))

        // å·¥å…·Tab
        TabContent() {
          ToolsPage()
        }
        .tabBar(this.buildTabBarItem(2, 'å·¥å…·', 'ðŸ› ï¸', 'ðŸ› ï¸'))

        // æˆ‘çš„Tab
        TabContent() {
          ProfilePage()
        }
        .tabBar(this.buildTabBarItem(3, 'æˆ‘çš„', 'ðŸ‘¤', 'ðŸ‘¤'))
      }
      .onChange((index: number) => {
        this.currentTabIndex = index;
      })
      .animationDuration(300)
      .backgroundColor('#F8F9FA')
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F8F9FA')
  }

  @Builder
  buildTabBarItem(index: number, title: string, normalIcon: string, selectedIcon: string) {
    Column() {
      Text(this.currentTabIndex === index ? selectedIcon : normalIcon)
        .fontSize(24)
        .margin({ bottom: 4 })

      Text(title)
        .fontSize(10)
        .fontColor(this.currentTabIndex === index ? '#FF6B35' : '#8E8E93')
        .fontWeight(this.currentTabIndex === index ? FontWeight.Medium : FontWeight.Normal)
    }
    .width('100%')
    .height(56)
    .justifyContent(FlexAlign.Center)
    .alignItems(HorizontalAlign.Center)
    .backgroundColor(Color.White)
    .onClick(() => {
      this.currentTabIndex = index;
      this.tabsController.changeIndex(index);
    })
  }
}